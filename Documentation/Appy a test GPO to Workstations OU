## ‚úÖ 1. Apply a Test GPO to the Workstations OU

Let‚Äôs apply a simple GPO that will visibly confirm it's working ‚Äî for example, we‚Äôll display a legal banner on logon.

## üõ† Steps to Create and Link the GPO:
1. On your Domain Controller, open Group Policy Management

2. Right-click the Workstations OU ‚Üí Create a GPO in this domain, and Link it here‚Ä¶

3. Name it something like: Workstation - Legal Banner

4. Right-click the new GPO > Edit

## üîí Configure the Banner:
Navigate to:
`Computer Configuration > Policies > Windows Settings > Security Settings > Local Policies > Security Options`

Set:

Interactive logon: Message title for users attempting to log on ‚Üí e.g., `Helpdesk Notice`

Interactive logon: Message text for users attempting to log on ‚Üí e.g., `Unauthorized access is prohibited. All activity may be monitored.`

5. Close the editor and run:
`gpupdate /force`

on your WIN10 client (or reboot it) to test.

## ‚úÖ You should now see a banner before login ‚Äî this confirms the Workstations OU GPO is applying correctly.

## üì∏ Screenshots

- `screenshots/GPO_interactive_logon_policy.png`


üìú 2. Add a Script to Log Which Computer a User Logs In From
We‚Äôll use a Logon Script via GPO to write the username and computer name to a central text file on your Domain Controller (or shared folder).

üìÅ Prep Shared Log Folder:
1. On your Domain Controller, create a folder like:
`C:\LoginLogs`
2. Share it:

- Right-click > Properties > Sharing tab > Advanced Sharing

- Share as `LoginLogs`

- Give Authenticated Users or Domain Computers `Write` permission

| ssmith     | Sarah Smith       | IT           | IT_Admins        | IT lead                                |
| dnguyen    | Diana Nguyen      | IT           | IT_Admins        | Systems administrator                  |
| eperez     | Elena Perez       | IT           | IT_Admins        | Security analyst                       |
| mlee       | Mike Lee          | Support      | Support_Level1   | Tier 1 help desk tech                  |
| cmorris    | Chris Morris      | Support      | Support_Level1   | Tier 1 help desk tech                  |
| ljames     | Lisa James        | Support      | Support_Level1   | Tier 2 support                         |
| bwalker    | Brandon Walker    | Support      | Support_Level1   | Night shift support                    |

## üõ°Ô∏è Also Set NTFS (Security) Permissions:
- Still in the folder Properties, go to the Security tab

- Click Edit ‚Üí Add:

- Authenticated Users

- Give them Modify or at least Write access

Now the path is: `C:\LoginLogs`

## üì∏ Screenshots

- `screenshots/sharing_logfolder.png`

üßæ Create the Logon Script:
1. Open Notepad and paste:
`@echo off
for /f "tokens=2 delims=:" %%A in ('ipconfig ^| findstr /C:"IPv4 Address"') do (
    set ip=%%A
)
set ip=%ip:~1%

echo %username%,%computername%,%ip%,%date%,%time% >> \\DC-Server\LoginLogs\logons.csv`

2. Save as:
`logonscript.bat`
3. Place this script in:
`C:Windows\SYSVOL\sysvol\helpdesk.local\scripts\`

## üõ°Ô∏è Add the Logon Script via Group Policy
## üìç Steps:
1. Open Group Policy Management on DC-Server

- You can find it by searching for gpmc.msc

2. Expand your domain (e.g., helpdesk.local)

3. Right-click an appropriate GPO:

- ‚úÖ You can use Default Domain Policy

- Or create a new GPO like Logon Logging for better organization:

- Right-click the domain > Create a GPO in this domain, and Link it here‚Ä¶

- Name it Logon Logging

4. Right-click the GPO > Edit

## üìù Add the Script

5. In the Group Policy Management Editor, navigate to:
`User Configuration > Policies > Windows Settings > Scripts (Logon/Logoff) > Logon`
6. Double-click Logon > click Add‚Ä¶

7. Click Browse‚Ä¶

-This will open the scripts folder:
``\\helpdesk.local\SYSVOL\helpdesk.local\scripts\`

- Select your script: logonscript.bat

8. Click OK > then OK again to close the dialog

 ## üß™ Logon Script Test Procedure

### ‚úÖ Prerequisites

Ensure the following are completed before testing:

- `logonscript.bat` is saved in:
`C:\Windows\SYSVOL\sysvol\helpdesk.local\scripts\`
- The script logs to:

### ‚úÖ Prerequisites

- The `LoginLogs` folder is shared and `Authenticated Users` have **Write** permission (Share + NTFS)
- The script is linked to a GPO (e.g., `Default Domain Policy` or custom `Logon Logging` GPO)
- The GPO is applied to OUs containing **user accounts** (e.g., HR, IT, Support)
- You have:
  - At least one **domain user** (e.g., `jdoe`)
  - A domain-joined **client machine** (e.g., `WIN10CLIENT`)

---

### üß≠ Steps to Test

1. **On the client machine (`WIN10CLIENT`)**:
   - Log off any existing user
   - Log in as a domain user (e.g., `jdoe`, `mlee`, etc.)

2. **On the Domain Controller (`DC-Server`)**:
   - Open the file:

     ```
     C:\LoginLogs\logons.csv
     ```

3. ‚úÖ Confirm the file contains a new entry like:

jdoe,WIN10CLIENT,192.168.0.25,04/21/2025,10:58:41.45


---

### üõ†Ô∏è Troubleshooting

| Issue                         | Solution                                                              |
|------------------------------|-----------------------------------------------------------------------|
| File doesn't exist or is empty | Check if the user has write access to the `LoginLogs` share           |
| Script doesn‚Äôt run           | Verify GPO is linked to the correct OU containing the **user**        |
| GPO not applying             | Run `gpresult /r` or `gpupdate /force` on the client machine           |
| Script path not resolving    | Confirm the script is in the correct SYSVOL `scripts` folder           |
